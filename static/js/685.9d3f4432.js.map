{"version":3,"file":"static/js/685.9d3f4432.js","mappings":"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","sources":["webpack://practicalcomp/./src/views/login/index.vue","webpack://practicalcomp/./src/utils/rsaEncrypt.js","webpack://practicalcomp/src/views/login/index.vue","webpack://practicalcomp/./src/views/login/index.vue?ff45","webpack://practicalcomp/./src/views/login/index.vue?a173"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login\"},[_c('el-form',{ref:\"formData\",staticClass:\"login_box\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"label-width\":\"0px\"}},[_c('h1',{staticClass:\"login_title\"},[_vm._v(\"登录\")]),_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"placeholder\":\"用户\"},model:{value:(_vm.formData.username),callback:function ($$v) {_vm.$set(_vm.formData, \"username\", $$v)},expression:\"formData.username\"}},[_c('i',{staticClass:\"el-icon-user-solid\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"placeholder\":\"密码\",\"show-password\":\"\"},model:{value:(_vm.formData.password),callback:function ($$v) {_vm.$set(_vm.formData, \"password\", $$v)},expression:\"formData.password\"}},[_c('i',{staticClass:\"el-icon-s-order\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-form-item',{attrs:{\"prop\":\"code\"}},[_c('el-input',{staticStyle:{\"width\":\"67%\"},attrs:{\"placeholder\":\"验证码\"},model:{value:(_vm.formData.code),callback:function ($$v) {_vm.$set(_vm.formData, \"code\", $$v)},expression:\"formData.code\"}},[_c('i',{staticClass:\"el-icon-mobile-phone\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})]),_c('div',{staticClass:\"login_code\"},[_c('img',{attrs:{\"src\":_vm.codeUrl,\"alt\":\"\"},on:{\"click\":_vm.codeImage}})])],1),_c('el-checkbox',{staticStyle:{\"margin\":\"0 0 22px 0\"},model:{value:(_vm.formData.rememberMe),callback:function ($$v) {_vm.$set(_vm.formData, \"rememberMe\", $$v)},expression:\"formData.rememberMe\"}},[_vm._v(\" 记住我 \")]),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"登录\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import JSEncrypt from 'jsencrypt/bin/jsencrypt.min'\n\n// 密钥对生成 http://web.chacuo.net/netrsakeypair\n\nconst publicKey = 'MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBANL378k3RiZHWx5AfJqdH9xRNBmD9wGD\\n' +\n  '2iRe41HdTNF8RUhNnHit5NpMNtGL0NPTSSpPjjI1kJfVorRvaQerUgkCAwEAAQ=='\n\n// 加密\nexport function encrypt(txt) {\n  const encryptor = new JSEncrypt()\n  encryptor.setPublicKey(publicKey) // 设置公钥\n  return encryptor.encrypt(txt) // 对需要加密的数据进行加密\n}","<template>\n  <div class=\"login\">\n    <el-form\n      ref=\"formData\"\n      :model=\"formData\"\n      :rules=\"rules\"\n      label-width=\"0px\"\n      class=\"login_box\"\n    >\n      <h1 class=\"login_title\">登录</h1>\n      <el-form-item prop=\"username\">\n        <el-input\n          v-model=\"formData.username\"\n          auto-complete=\"off\"\n          placeholder=\"用户\"\n        >\n          <i slot=\"prefix\" class=\"el-icon-user-solid\"></i>\n        </el-input>\n      </el-form-item>\n      <el-form-item prop=\"password\">\n        <el-input\n          v-model=\"formData.password\"\n          auto-complete=\"off\"\n          placeholder=\"密码\"\n          show-password\n        >\n          <i slot=\"prefix\" class=\"el-icon-s-order\"></i>\n        </el-input>\n      </el-form-item>\n      <el-form-item prop=\"code\">\n        <el-input\n          placeholder=\"验证码\"\n          style=\"width: 67%\"\n          v-model=\"formData.code\"\n        >\n          <i slot=\"prefix\" class=\"el-icon-mobile-phone\"></i>\n        </el-input>\n        <div class=\"login_code\">\n          <img :src=\"codeUrl\" alt=\"\" @click=\"codeImage\" />\n        </div>\n      </el-form-item>\n      <el-checkbox style=\"margin: 0 0 22px 0\" v-model=\"formData.rememberMe\">\n        记住我\n      </el-checkbox>\n      <el-form-item>\n        <el-button style=\"width: 100%\" type=\"primary\" @click=\"onSubmit\"\n          >登录</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { getCodeImg } from \"@/api/login\";\nimport { encrypt } from \"@/utils/rsaEncrypt\";\nimport Cookies from \"js-cookie\";\nimport { mapActions } from \"vuex\";\nexport default {\n  data() {\n    return {\n      formData: {\n        username: \"admin\",\n        password: \"123456\",\n        code: \"\",\n        uuid: \"\",\n        rememberMe: false,\n      },\n      cookiePass: \"\",\n      codeUrl: \"\",\n      redirect: null,\n      rules: {\n        username: [\n          { required: true, trigger: \"blur\", message: \"用户名不能为空\" },\n        ],\n        password: [\n          { required: true, trigger: \"blur\", message: \"密码不能为空\" },\n        ],\n        code: [\n          { required: true, trigger: \"change\", message: \"验证码不能为空\" },\n        ],\n      },\n    };\n  },\n  watch: {\n    $route: {\n      handler(route) {\n        const data = route.query;\n        if (data && data.redirect) {\n          this.redirect = data.redirect;\n          delete data.redirect;\n          if (JSON.stringify(data) !== \"{}\") {\n            this.redirect =\n              this.redirect +\n              \"&\" +\n              this.$qs.stringify(data, { indices: false });\n          }\n        }\n      },\n      immediate: true,\n    },\n  },\n  mounted() {\n    this.codeImage();\n    this.getCookie();\n  },\n  methods: {\n    ...mapActions({\n      Login: \"user/Login\",\n    }),\n    async codeImage() {\n      const { uuid, img } = await getCodeImg();\n      this.codeUrl = img;\n      this.formData.uuid = uuid;\n    },\n    onSubmit() {\n      this.$refs.formData.validate((valid) => {\n        const user = { ...this.formData };\n        if (user.password !== this.cookiePass) {\n          user.password = encrypt(user.password);\n        }\n        if (valid) {\n          if (user.rememberMe) {\n            Cookies.set(\"username\", user.username);\n            Cookies.set(\"password\", user.password);\n            Cookies.set(\"rememberMe\", user.password);\n          } else {\n            Cookies.remove(\"username\");\n            Cookies.remove(\"password\");\n            Cookies.remove(\"rememberMe\");\n          }\n          this.Login(user)\n            .then((_) => {\n              this.$router.push({ path: \"/\" || \"/\" });\n            })\n            .catch((error) => {\n              this.codeImage();\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    getCookie() {\n      const username = Cookies.get(\"username\");\n      let password = Cookies.get(\"password\");\n      const rememberMe = Cookies.get(\"rememberMe\");\n      this.cookiePass = password === undefined ? \"\" : password;\n      password = password === undefined ? this.formData.password : password;\n      this.formData = {\n        username: username === undefined ? this.formData.username : username,\n        password,\n        rememberMe: Boolean(rememberMe),\n        code: \"\",\n      };\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.login {\n  height: 100vh;\n  width: 100vw;\n  &_title {\n    text-align: center;\n  }\n  &_box {\n    width: 40%;\n    height: 40%;\n    position: absolute;\n    inset: 0;\n    margin: auto;\n  }\n  &_code {\n    width: 33%;\n    float: right;\n    text-align: center;\n    img {\n      vertical-align: middle;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=08061f28&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=08061f28&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08061f28\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","ref","attrs","formData","rules","_v","model","value","username","callback","$$v","$set","expression","slot","password","staticStyle","code","codeUrl","on","codeImage","rememberMe","onSubmit","staticRenderFns","publicKey","encrypt","txt","encryptor","JSEncrypt","setPublicKey","data","uuid","cookiePass","redirect","required","trigger","message","watch","$route","handler","route","query","JSON","stringify","$qs","indices","immediate","mounted","getCookie","methods","mapActions","Login","img","getCodeImg","$refs","validate","valid","user","Cookies","set","remove","then","_","$router","push","path","catch","error","get","undefined","Boolean","component"],"sourceRoot":""}