"use strict";(self["webpackChunkpracticalcomp"]=self["webpackChunkpracticalcomp"]||[]).push([[685],{685:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("el-form",{ref:"formData",staticClass:"login_box",attrs:{model:e.formData,rules:e.rules,"label-width":"0px"}},[t("h1",{staticClass:"login_title"},[e._v("登录")]),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{"auto-complete":"off",placeholder:"用户"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}},[t("i",{staticClass:"el-icon-user-solid",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{"auto-complete":"off",placeholder:"密码","show-password":""},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}},[t("i",{staticClass:"el-icon-s-order",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-form-item",{attrs:{prop:"code"}},[t("el-input",{staticStyle:{width:"67%"},attrs:{placeholder:"验证码"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}},[t("i",{staticClass:"el-icon-mobile-phone",attrs:{slot:"prefix"},slot:"prefix"})]),t("div",{staticClass:"login_code"},[t("img",{attrs:{src:e.codeUrl,alt:""},on:{click:e.codeImage}})])],1),t("el-checkbox",{staticStyle:{margin:"0 0 22px 0"},model:{value:e.formData.rememberMe,callback:function(t){e.$set(e.formData,"rememberMe",t)},expression:"formData.rememberMe"}},[e._v(" 记住我 ")]),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登录")])],1)],1)],1)},a=[],o=(r(44114),r(57381)),i=r(35238),c=r.n(i);const l="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBANL378k3RiZHWx5AfJqdH9xRNBmD9wGD\n2iRe41HdTNF8RUhNnHit5NpMNtGL0NPTSSpPjjI1kJfVorRvaQerUgkCAwEAAQ==";function m(e){const t=new(c());return t.setPublicKey(l),t.encrypt(e)}var n=r(65462),d=r(1910),u={data(){return{formData:{username:"admin",password:"123456",code:"",uuid:"",rememberMe:!1},cookiePass:"",codeUrl:"",redirect:null,rules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}],code:[{required:!0,trigger:"change",message:"验证码不能为空"}]}}},watch:{$route:{handler(e){const t=e.query;t&&t.redirect&&(this.redirect=t.redirect,delete t.redirect,"{}"!==JSON.stringify(t)&&(this.redirect=this.redirect+"&"+this.$qs.stringify(t,{indices:!1})))},immediate:!0}},mounted(){this.codeImage(),this.getCookie()},methods:{...(0,d.i0)({Login:"user/Login"}),async codeImage(){const{uuid:e,img:t}=await(0,o.Pz)();this.codeUrl=t,this.formData.uuid=e},onSubmit(){this.$refs.formData.validate((e=>{const t={...this.formData};if(t.password!==this.cookiePass&&(t.password=m(t.password)),!e)return!1;t.rememberMe?(n.A.set("username",t.username),n.A.set("password",t.password),n.A.set("rememberMe",t.password)):(n.A.remove("username"),n.A.remove("password"),n.A.remove("rememberMe")),this.Login(t).then((e=>{this.$router.push({path:"/"})})).catch((e=>{this.codeImage()}))}))},getCookie(){const e=n.A.get("username");let t=n.A.get("password");const r=n.A.get("rememberMe");this.cookiePass=void 0===t?"":t,t=void 0===t?this.formData.password:t,this.formData={username:void 0===e?this.formData.username:e,password:t,rememberMe:Boolean(r),code:""}}}},p=u,f=r(81656),h=(0,f.A)(p,s,a,!1,null,"08061f28",null),g=h.exports}}]);
//# sourceMappingURL=685.9d3f4432.js.map